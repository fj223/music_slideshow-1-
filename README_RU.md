# Музыкальная Слайд-шоу Генерация

## Описание проекта

Этот проект представляет собой инструмент для создания видео-슬айт-шоу на основе аудиофайлов. Процесс включает в себя транскрипцию аудио в текст, генерацию изображений по ключевым словам и создание видео из полученных изображений с добавлением оригинального аудио.

## Требования

- Python 3.8 - 3.10
- FFmpeg
- Git

## Установка

1. **Клонирование репозитория**
   ```bash
   git clone [URL вашего репозитория]
   cd music_slideshow1
   ```

2. **Установка FFmpeg из предоставленного архива (Windows)**
   - В корне проекта находится архив `ffmpeg-8.0-full_build.7z`
   - Распакуйте этот архив в корень проекта или в удобное для вас место
   - Для распаковки вы можете использовать 7-Zip или другой архиватор
   - Например, распакуйте в папку `C:\ffmpeg`
   - Добавьте путь к `bin` директории FFmpeg в переменную среды PATH:
     ```
     C:\ffmpeg\bin
     ```
   - Проверьте установку, открыв новый командный提示符 и введя:
     ```bash
     ffmpeg -version
     ```

3. **Создание виртуального окружения**
   ```bash
   # Для Windows
   python -m venv venv
   venv\Scripts\activate
   
   # Для Linux/Mac
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **Установка зависимостей**
   ```bash
   pip install -r requirements.txt
   ```

4. **Настройка переменных окружения**
   - Скопируйте файл `.env.example` в `.env`
   - Заполните необходимые API-ключи
   ```bash
   # Для Windows
   copy .env.example .env
   
   # Для Linux/Mac
   cp .env.example .env
   ```

## Использование

### 1. Генерация изображений из аудио

```bash
# Запустите процесс создания изображений из аудио
python "audio_to_images.py" --audio "input/audio/[ваш_аудио_файл].mp3" --max-images 5
```

### 2. Создание видео из изображений и аудио

```bash
# Запустите полный процесс создания видео
python "audio_to_video_pipeline.py" --audio "input/audio/[ваш_аудио_файл].mp3" --max-images 6 --duration 4.0
```

### 3. Дополнительные параметры

- `--style`: Стиль генерируемых изображений
- `--extract_keywords`: Извлечение ключевых слов (True/False)
- `--add_text_overlay`: Добавление текстового перекрытия на видео
- `--transition_duration`: Продолжительность переходов между изображениями
- `--use_beat_sync`: Синхронизация смены изображений с ритмом музыки

## Структура проекта

```
music_slideshow1/
├── input/              # Входные файлы
│   └── audio/          # Аудиофайлы
├── output/             # Выходные файлы
│   ├── images/         # Сгенерированные изображения
│   ├── transcribed/    # Транскрипции аудио
│   └── videos/         # Созданные видео
├── utils/              # Утилиты
│   ├── audio_processor.py    # Обработка аудио
│   ├── image_generator.py    # Генерация изображений
│   └── video_creator.py      # Создание видео
├── audio_to_images.py         # Основной скрипт генерации изображений
├── audio_to_video_pipeline.py # Полный процесс создания видео
├── config.py                  # Конфигурация проекта
└── requirements.txt           # Зависимости
```

## Решение проблем

### 1. Проблемы с moviepy

Если у вас возникают проблемы с библиотекой moviepy, убедитесь, что установлена правильная версия:

```bash
pip uninstall -y moviepy
pip install moviepy==1.0.3
```

### 2. Проблемы с FFmpeg

Если возникают ошибки, связанные с FFmpeg:

- Убедитесь, что FFmpeg добавлен в переменную среды PATH
- После изменения переменной PATH закройте и откройте командный提示符
- Проверьте установку, введя в командной строке:
  ```bash
  ffmpeg -version
  ```
- Если проблемы продолжают возникать, вы можете явно указать путь к FFmpeg в коде
  - Откройте файл `config.py`
  - Добавьте следующую строку, заменив путь на ваш:
  ```python
  os.environ["IMAGEIO_FFMPEG_EXE"] = "C:\\ffmpeg\\bin\\ffmpeg.exe"
  ```

### 3. Проблемы с кодировкой

Если возникают проблемы с отображением русских символов, убедитесь, что файлы кодированы в UTF-8.

## Лицензия

Данный проект предназначен для личных и образовательных целей.